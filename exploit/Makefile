all: vota
test: vota
	LD_LIBRARY_PATH=. ./$<
exploit: vota
	LANG=C ./exploit.py
clean:
	rm -f libhkdf.so libhkdf.so.orig vota

libhkdf.so: hkdf.cpp
	g++ -m32 -shared $< -o $@
	cp $@ $@.orig
vota: vota.cpp libhkdf.so
	g++ -m32 -no-pie -fno-PIC $< -o $@ -L. -lhkdf
